<div class="customer-reviews-container" [class.backgroundClass] = "asModal">

  <div class="star-rating-display">
    <span *ngFor="let filled of getStarArray()"
          class="star"
          [class.filled]="filled">
      ★
    </span>
  </div>

  <div class="average-rating">
    <span class="rating-number">{{ reviewData.avgRating.toFixed(1) }}</span>
    <span class="rating-text">out of 5</span>
  </div>

  <div class="total-reviews">
    {{ formatNumber(reviewData.totalReviews) }} global ratings
  </div>

  <div class="rating-breakdown">
    <div class="rating-row">
      <span class="star-label">5 star</span>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="reviewData.ratingDistribution[5]"></div>
      </div>
      <span class="percentage">{{ reviewData.ratingDistribution[5] }}%</span>
    </div>

    <div class="rating-row">
      <span class="star-label">4 star</span>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="reviewData.ratingDistribution[4]"></div>
      </div>
      <span class="percentage">{{ reviewData.ratingDistribution[4] }}%</span>
    </div>

    <div class="rating-row">
      <span class="star-label">3 star</span>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="reviewData.ratingDistribution[3]"></div>
      </div>
      <span class="percentage">{{ reviewData.ratingDistribution[3] }}%</span>
    </div>

    <div class="rating-row">
      <span class="star-label">2 star</span>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="reviewData.ratingDistribution[2]"></div>
      </div>
      <span class="percentage">{{ reviewData.ratingDistribution[2] }}%</span>
    </div>

    <div class="rating-row">
      <span class="star-label">1 star</span>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="reviewData.ratingDistribution[1]"></div>
      </div>
      <span class="percentage">{{ reviewData.ratingDistribution[1] }}%</span>
    </div>
  </div>

  <div class="see-reviews-link" *ngIf="asModal">
    <a (click)="goToReviewPage()" class="text-decoration-none">See customer reviews ›</a>
  </div>
</div>